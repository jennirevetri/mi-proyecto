<section class="section">
  <div class="container">
    <div class="box" style="width: 60%;">
      <h1 class="title has-text-centered">Formulario de Información</h1>
      <form [formGroup]="profileForm" (ngSubmit)="saveProfileData()">
        <fieldset>
          <legend>Información Personal</legend>

          <div class="field">
            <div class="control">
              <label class="label" for="email">Correo Electrónico:</label>
              <input class="input" type="email" id="email" formControlName="email" readonly>
              <p class="help is-danger" *ngIf="profileForm.get('email')?.errors?.['email']">
                Por favor, ingrese un correo electrónico válido.
              </p>
            </div>
            <div class="control" id="imageCentered">
              <div class="image-container ">
                <img [src]="profileForm.get('picture')?.value" class="image-preview" *ngIf="profileForm.get('picture')?.value" alt="Profile Picture">
                <div *ngIf="!profileForm.get('picture')?.value" class="image-placeholder"></div>
              </div>
            </div>
          </div>

          <div class="field">
            <div class="control">
              <label class="label" for="picture">Fotografía:</label>
              <input class="input" type="file" id="picture" (change)="onFileSelected($event)" accept="image/*">
            </div>
            <div class="control">
              <label class="label" for="phone">Teléfono:</label>
              <ng-container>
                <input class="input" type="text" id="phone-prefix" formControlName="phonePrefix" readonly style="width: 60px; display: inline-block;">
                <input class="input" type="tel" id="phone" formControlName="phone" style="width: calc(100% - 65px); display: inline-block;">
              </ng-container>
              <p class="help is-danger" *ngIf="profileForm.get('phone')?.errors?.['invalidPhone']">
                Por favor, ingrese un número de teléfono válido.
              </p>
            </div>
          </div>

          
          <div class="field">
            <div class="control">
              <label class="label" for="gender">Género:</label>
              <div class="select">
                <select id="gender" formControlName="gender">
                  <option value="masculino">Masculino</option>
                  <option value="femenino">Femenino</option>
                </select>
              </div>
            </div>
          </div>

          <div class="field">
            <div class="control">
              <label class="label" for="first-name">Nombre:</label>
              <input class="input" type="text" id="first-name" formControlName="firstName">
              <p class="help is-danger" *ngIf="profileForm.get('firstName')?.errors?.['pattern']">
                El nombre no debe contener números.
              </p>
            </div>
            <div class="control">
              <label class="label" for="last-name">Apellido:</label>
              <input class="input" type="text" id="last-name" formControlName="lastName">
              <p class="help is-danger" *ngIf="profileForm.get('lastName')?.errors?.['pattern']">
                El apellido no debe contener números.
              </p>
            </div>
          </div>

          <div class="field">
            <div class="control">
              <label class="label" for="nationality">Nacionalidad:</label>
              <input class="input" type="text" id="nationality" formControlName="nat">
            </div>
          </div>
        </fieldset>

        <fieldset>
          <legend>Ubicación</legend>
          <div id="map" class="mb-4"></div>
          <div class="field">
            <div class="control">
              <label class="label" for="street-number">Número de Calle:</label>
              <input class="input" type="text" id="street-number" formControlName="streetNumber">
            </div>
            <div class="control">
              <label class="label" for="street-name">Nombre de Calle:</label>
              <input class="input" type="text" id="street-name" formControlName="streetName">
            </div>
          </div>
          <div class="field">
            <div class="control">
              <label class="label" for="city">Ciudad:</label>
              <input class="input" type="text" id="city" formControlName="city">
            </div>
            <div class="control">
              <label class="label" for="state">Estado:</label>
              <input class="input" type="text" id="state" formControlName="state">
            </div>
          </div>
          <div class="field">
            <div class="control">
              <label class="label" for="country">País:</label>
              <input class="input" type="text" id="country" formControlName="country">
            </div>
            <div class="control">
              <label class="label" for="postcode">Código Postal:</label>
              <input class="input" type="text" id="postcode" formControlName="postcode">
            </div>
          </div>
          <div class="field">
            <div class="control">
              <label class="label" for="latitude">Latitud:</label>
              <input class="input" type="text" id="latitude" formControlName="latitude" readonly>
            </div>
            <div class="control">
              <label class="label" for="longitude">Longitud:</label>
              <input class="input" type="text" id="longitude" formControlName="longitude" readonly>
            </div>
          </div>
          <div class="field">
            <div class="control">
              <label class="label" for="timezone-offset">Zona Horaria (Desplazamiento):</label>
              <input class="input" type="text" id="timezone-offset" formControlName="timezoneOffset" readonly>
            </div>
            <div class="control">
              <label class="label" for="timezone-description">Descripción de la Zona Horaria:</label>
              <input class="input" type="text" id="timezone-description" formControlName="timezoneDescription" readonly>
            </div>
          </div>
        </fieldset>

        <button class="button is-primary" type="submit" [disabled]="!profileForm.valid">Guardar</button>
      </form>
    </div>
  </div>
</section>
